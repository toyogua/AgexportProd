{"version":3,"sources":["../../src/pages/menu/menu.module.ts","../../src/pages/menu/menu.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MenuPage } from './menu';\n\n@NgModule({\n  declarations: [\n    MenuPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MenuPage),\n  ],\n})\nexport class MenuPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/menu/menu.module.ts","//import { MainPage } from '../main/main';\n//import { OfferPage } from '../offer/offer';\n//import { EventsPage } from '../events/events';\n//import { TabsPage } from '../tabs/tabs';\nimport { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, Nav, Tabs } from 'ionic-angular';\nimport { RestProvider } from '../../providers/rest/rest';\nimport { ActivatePage } from '../activate/activate';\nimport { Storage } from '@ionic/storage';\n//import { from } from 'rxjs';\n \nexport interface PageInterface {\n  title: string;\n  pageName: string;\n  tabComponent?: any;\n  index?: number;\n  icon: string;\n  \n}\n \n@IonicPage()\n@Component({\n  selector: 'page-menu',\n  templateUrl: 'menu.html',\n})\nexport class MenuPage {\n  // Basic root for our content view\n  rootPage = 'TabsPage';\n  activatePage = ActivatePage;\n \n  // Reference to the app's root nav\n  @ViewChild(Nav) nav: Nav;\n \n  pages: PageInterface[] = [\n    { title: 'INICIO', pageName: 'TabsPage', tabComponent: 'Tab1Page', index: 0, icon: /*'qr-scanner'*/ 'home' },\n    { title: 'INFORMACIÓN GENERAL', pageName: 'OfferprogramPage', icon:'information-circle' },\n    { title: 'POLITICA DE PUNTOS', pageName: 'StarprogramPage', icon:'git-compare' },\n    { title: 'CONSULTA DE PUNTOS', pageName: 'StarbalancePage', icon:'stats' },\n    { title: 'PROMOCIONES', pageName: 'TabsPage', tabComponent: 'Tab2Page', index: 1, icon: 'pricetags' },\n    { title: 'EVENTOS', pageName: 'TabsPage', tabComponent: 'Tab3Page', index: 2, icon: 'calendar' },\n    { title: 'MIS INVITADOS', pageName: 'InvitedPage', icon:'people' },\n    \n  ];\n \n  constructor(public navCtrl: NavController, private rest: RestProvider, private storage: Storage) { }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad MenuPage');\n    this.rest.profile().then(\n      (resolve) =>{\n    }, (reject) => {\n      console.log(\"Profile Reject\", JSON.stringify(reject));\n    });\n    this.storage.get('role').then((role) => {\n      this.storage.get('type').then((type)=> {\n        console.log('Type:', type);\n        if (role == 'Establecimiento' || role == 'Agexport' ) {\n          this.pages = [\n            { title: 'INICIO', pageName: 'MainPage', tabComponent: 'Tab1Page', index: 0, icon: /*'qr-scanner'*/ 'home' },\n            { title: 'PROMOCIONES', pageName: 'OfferPage', tabComponent: 'Tab2Page', index: 1, icon: 'pricetags' }\n          ];\n        } else if (role == 'Regular' && type != 'Principal'){\n          this.pages = [\n            { title: 'INICIO', pageName: 'TabsPage', tabComponent: 'Tab1Page', index: 0, icon: /*'qr-scanner'*/ 'home' },\n            { title: 'INFORMACIÓN GENERAL', pageName: 'OfferprogramPage', icon:'information-circle' },\n            { title: 'POLITICA DE PUNTOS', pageName: 'StarprogramPage', icon:'git-compare' },\n            { title: 'PROMOCIONES', pageName: 'TabsPage', tabComponent: 'Tab2Page', index: 1, icon: 'pricetags' },\n            { title: 'EVENTOS', pageName: 'TabsPage', tabComponent: 'Tab3Page', index: 2, icon: 'calendar' },\n         ]\n        }\n      })\n    })\n  }\n \n  openPage(page: PageInterface) {\n    const childNavs: any[] = this.nav.getActiveChildNavs();\n    const childTabNav: Tabs = childNavs.find(({viewCtrl}) => (viewCtrl && viewCtrl.id === page.pageName));\n    if (childTabNav && (typeof page.index !== 'undefined')) {\n      childTabNav.select(page.index);\n    } else {\n      if (page.pageName =='StarprogramPage') {\n        window.open('http://agexportplus.iflexsoftware.com/files/Politicas.pdf', '_system');\n      } else {\n        this.nav.setRoot(page.pageName, {tabIndex: page.index});\n      }\n    }\n\n    \n/*\n\n    let params = {};\n \n    // The index is equal to the order of our tabs inside tabs.ts\n    if (page.index) {\n      params = { tabIndex: page.index };\n    }\n \n    // The active child nav is our Tabs Navigation\n    if (this.nav.getActiveChildNavs() && page.index != undefined) {\n      this.nav.getActiveChildNavs()[0].select(page.index);\n    } else {\n      // Tabs are not active, so reset the root page \n      // In this case: moving to or from SpecialPage\n      this.nav.setRoot(page.pageName, params);\n    }\n    */\n  }\n \n  isActive(page, tabPage) {\n\n    //const childTabsNav: any[] = this.nav.getActiveChildNavs();\n    //const selectedTab: Tab = childTabsNav.length && childTabsNav[0].getSelected && childTabsNav[0].getSelected();\n    /*\n    if (childTabsNav.length && typeof tabPage !== 'undefined') {\n      if (selectedTab && selectedTab.root && selectedTab.root === tabPage) {\n        return ;\n      }\n      return;\n    }\n    */\n\n\n    const activeNav = this.nav.getActive();\n    if (activeNav && activeNav.name && activeNav.name === page) {\n      return ;\n    }\n    return;\n\n/*\n    // Again the Tabs Navigation\n    let childNav = this.nav.getActiveChildNavs()[0];\n \n    if (childNav) {\n      if (childNav.getSelected() && childNav.getSelected().root === page.tabComponent) {\n        return 'secondary';\n      }\n      return;\n    }\n \n    // Fallback needed when there is no active childnav (tabs not active)\n    if (this.nav.getActive() && this.nav.getActive().name === page.pageName) {\n      return 'secondary';\n    }\n    return;\n\n    */\n  }\n  logout(){\n    console.log(\"--LogOut--\");\n    this.storage.set(\"success\", false);\n    this.storage.set(\"session\", null);\n    this.storage.set(\"session_id\", null);\n    this.storage.set(\"profile\", null);\n    this.storage.set(\"role\", null);\n    this.navCtrl.push(this.activatePage);\n  }\n \n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/menu/menu.ts"],"sourceRoot":""}