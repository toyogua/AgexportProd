{"version":3,"sources":["../../src/pages/events/events.module.ts","../../src/pages/events/events.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { EventsPage } from './events';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EventsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(EventsPage),\r\n  ],\r\n})\r\nexport class EventsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Loading, LoadingController, \r\n  Modal, ModalController, ModalOptions, ToastController, Platform  } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\r\nimport { RestProvider } from '../../providers/rest/rest';\r\n\r\n\r\n/**\r\n * Generated class for the EventsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-events',\r\n  templateUrl: 'events.html',\r\n})\r\nexport class EventsPage {\r\n  showPublic = true;\r\n  showSector = false;\r\n  showSchool = false;\r\n  selectedSegment: any;\r\n  loading: Loading;\r\n  error = false;\r\n \r\n  publicEvents: any;\r\n  privateEvents: any;\r\n  schoolEvents: any;\r\n  asistLabel = \"No Confirmado\";\r\n  role: string = null;\r\n  customStyle = \"toast-nice\";\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private loadingCtrl: LoadingController,\r\n    private toastCtrl: ToastController,\r\n    private rest: RestProvider,\r\n    private platform: Platform,\r\n    private modal: ModalController,\r\n    private storage: Storage,\r\n    private scanner: BarcodeScanner) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad EventsPage');\r\n    this.showLoading();\r\n    this.manualRefresh();\r\n    this.loading.dismiss();\r\n  } \r\n  ionViewDidEnter() {\r\n    this.showLoading();\r\n    console.log('ionViewDidLoad EventsPage');\r\n    this.manualRefresh();\r\n    this.loading.dismiss();\r\n      \r\n  }\r\n  manualRefresh(){\r\n    //\r\n    this.rest.events().then(\r\n      (resolve: { succes, Publico, Privado, Escuela }) => {\r\n        this.publicEvents =resolve.Publico;\r\n        this.privateEvents=resolve.Privado;\r\n        this.schoolEvents=resolve.Escuela;\r\n        this.storage.get('role').then((role)=>{\r\n          this.role = role;\r\n          console.log('Events Role:', this.role);\r\n        })\r\n      },\r\n      (reject) => {\r\n        if (reject.status == '0' ) {\r\n        } else {\r\n          this.customStyle = \"toast-danger\";\r\n          this.presentToast(JSON.stringify(reject.error.error.message));\r\n        }\r\n      });\r\n    //\r\n  }\r\n  doRefresh(refresher){\r\n    console.log(\"start refresher\");\r\n    this.showLoading();\r\n    this.rest.events().then(\r\n      (resolve: { succes, Publico, Privado, Escuela }) => {\r\n        console.log(\"resolve\");\r\n        this.publicEvents =resolve.Publico;\r\n        this.privateEvents=resolve.Privado;\r\n        this.schoolEvents=resolve.Escuela;\r\n      },\r\n      (reject) => {\r\n        if (reject.status == '0' ) {\r\n        } else {\r\n          this.customStyle = \"toast-danger\";\r\n          this.presentToast(JSON.stringify(reject.error.error.message));\r\n        } \r\n      }\r\n    );\r\n    refresher.complete();\r\n    this.loading.dismiss();\r\n  }\r\n  openEvent(event){\r\n    const detailOptions: ModalOptions = {\r\n      enableBackdropDismiss: false\r\n    };\r\n    const detail: Modal = this.modal.create('StardetailPage', { event }, detailOptions);\r\n    detail.onDidDismiss(()=>{\r\n      this.showLoading();\r\n      this.manualRefresh();\r\n      this.loading.dismiss();\r\n    })\r\n    detail.present();\r\n  }\r\n  onSegmentChanged(segmentButton: any) {\r\n    switch (segmentButton.value){\r\n      case 'Publico':\r\n        this.showPublic = true;\r\n        this.showSector = false;\r\n        this.showSchool = false;\r\n      break;\r\n    case 'Privado':\r\n      this.showPublic = false;\r\n      this.showSector = true;\r\n      this.showSchool = false;\r\n    break;\r\n    case 'Escuela':\r\n      this.showPublic = false;\r\n      this.showSector = false;\r\n      this.showSchool = true;\r\n    break;\r\n    }\r\n   \r\n\r\n  }\r\n  scanQRFav(){\r\n    console.log(\"fav Action\");\r\n    this.storage.get(\"session_id\").then((session_id) => {\r\n      const qrData = {type: \"Asistencia\", record_id: null, session_id: session_id };\r\n      this.scanner.scan().then((qr)=>{\r\n        qrData.record_id = qr.text;\r\n        console.log(\"Fav Scan Payload\", JSON.stringify(qrData));\r\n        this.rest.transaction(qrData).then((resolve: {message, style} ) => {\r\n          if (resolve.style != undefined) {\r\n            this.customStyle = resolve.style;\r\n          }\r\n          this.presentToast(resolve.message);\r\n        }, reject => {\r\n          if (reject.status == '0' ){\r\n            this.customStyle = \"toast-danger\";\r\n            this.presentToast(\"No hay comunicacion con el servicio. Revise su conexion a internet\");\r\n          } else {\r\n            this.presentToast(JSON.stringify(reject.error.error.message));\r\n          }\r\n        })\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  updateConfirmationL(event){\r\n    console.log('Confirmation', JSON.stringify(event));\r\n    this.showLoading();\r\n    this.storage.get('session_id').then((session_id)=>{\r\n      let new_assist = (event.confirmation == 'Confirmado')? false: true;\r\n      const postData = { \r\n        session_id: session_id,\r\n        activity_code: event.activity_code,\r\n        assist: new_assist\r\n      }\r\n      console.log('Assist Payload:', JSON.stringify(postData))\r\n      this.rest.eventConfirmation(postData).then((resolve: any ) => {\r\n        if (resolve.style != undefined) {\r\n          this.customStyle = resolve.style;\r\n        }\r\n        this.manualRefresh();\r\n        this.presentToast(resolve.data.message);\r\n      }, reject => {\r\n        this.customStyle = \"toast-danger\";\r\n        if (reject.status == '0' ){\r\n          this.presentToast(\"No hay comunicacion con el servicio. Revise su conexion a internet\");\r\n        } else {\r\n          this.presentToast(JSON.stringify(reject.error.error.message));\r\n        }\r\n\r\n      })\r\n    });\r\n    this.loading.dismiss();\r\n    \r\n\r\n  }\r\n  scanQR(activity_code){\r\n    const qrData = {type: \"Asistencia\", record_id: activity_code, session_id: null };\r\n    this.scanner.scan().then((qr)=>{\r\n      qrData.session_id = qr.text; \r\n      this.rest.transaction(qrData).then((resolve: {message, style} ) => {\r\n        if (resolve.style != undefined) {\r\n          this.customStyle = resolve.style;\r\n        }\r\n        this.presentToast(resolve.message);\r\n      }, reject => {\r\n        this.customStyle = \"toast-danger\";\r\n        if (reject.status == '0' ){\r\n          this.presentToast(\"No hay comunicacion con el servicio. Revise su conexion a internet\");\r\n        } else {\r\n          this.presentToast(JSON.stringify(reject.error.error.message));\r\n        }\r\n\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n\r\n  showLoading() {\r\n    this.loading = this.loadingCtrl.create({\r\n      content: 'Please wait...',\r\n      dismissOnPageChange: true\r\n    });\r\n    this.loading.present();\r\n  }\r\n\r\n  openLocation(lat, lng){\r\n    let destination = lat + ',' + lng;\r\n\r\n    if(this.platform.is('ios')){\r\n      window.open('maps://?q=' + destination, '_system');\r\n    } else {\r\n      let label = encodeURI('Evento Agexport');\r\n      window.open('geo:0,0?q=' + destination + '(' + label + ')', '_system');\r\n    }\r\n  }\r\n  dynamicAction(action){\r\n    if (action.browsertype == \"External\"){\r\n      this.openExternal(action);\r\n    } else if (action.browsertype == \"Internal\") {\r\n      this.openInternal(action);\r\n    }\r\n  }\r\n\r\n\r\n  openExternal(action){\r\n    this.storage.get(\"session_id\").then((session_id) => {\r\n      let fullpath = action.url+\"?session_id=\"+session_id;\r\n      window.open(fullpath, '_system', 'location=yes');\r\n    });\r\n  }\r\n  openInternal(action){\r\n    this.navCtrl.push('InternalPage', { action });\r\n    /*const detailOptions: ModalOptions = {\r\n      enableBackdropDismiss: false\r\n    };\r\n    const detail: Modal = this.modal.create('InternalPage', { action }, detailOptions);\r\n    detail.present();\r\n    */\r\n  }\r\n\r\n\r\n  presentToast(msg) {\r\n\r\n    let toast = this.toastCtrl.create({\r\n      message: msg,\r\n      showCloseButton: true,\r\n      closeButtonText: 'Ok',\r\n      position: 'middle',\r\n      cssClass: this.customStyle\r\n    });\r\n  \r\n    toast.onDidDismiss(() => {\r\n      console.log('Dismissed toast');\r\n      this.customStyle = \"toast-nice\";\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events.ts"],"sourceRoot":""}