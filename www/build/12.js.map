{"version":3,"sources":["../../src/pages/events/events.module.ts","../../src/pages/events/events.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AAUtC;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAR5B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAU;aACX;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;aACrC;SACF,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACZa;AAC4G;AAC7G;AACsB;AACN;AAGzD;;;;;GAKG;AAOH;IAeE,oBACS,OAAsB,EACtB,SAAoB,EACnB,WAA8B,EAC9B,SAA0B,EAC1B,IAAkB,EAClB,QAAkB,EAClB,KAAsB,EACtB,OAAgB,EAChB,OAAuB;QARxB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,cAAS,GAAT,SAAS,CAAiB;QAC1B,SAAI,GAAJ,IAAI,CAAc;QAClB,aAAQ,GAAR,QAAQ,CAAU;QAClB,UAAK,GAAL,KAAK,CAAiB;QACtB,YAAO,GAAP,OAAO,CAAS;QAChB,YAAO,GAAP,OAAO,CAAgB;QAvBjC,eAAU,GAAG,IAAI,CAAC;QAClB,eAAU,GAAG,KAAK,CAAC;QACnB,eAAU,GAAG,KAAK,CAAC;QAGnB,UAAK,GAAG,KAAK,CAAC;QAKd,eAAU,GAAG,eAAe,CAAC;QAC7B,SAAI,GAAW,IAAI,CAAC;QACpB,gBAAW,GAAG,YAAY,CAAC;IAY3B,CAAC;IAED,mCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IACD,oCAAe,GAAf;QACE,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAEzB,CAAC;IACD,kCAAa,GAAb;QAAA,iBAoBC;QAnBC,EAAE;QACF,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACrB,UAAC,OAA8C;YAC7C,KAAI,CAAC,YAAY,GAAE,OAAO,CAAC,OAAO,CAAC;YACnC,KAAI,CAAC,aAAa,GAAC,OAAO,CAAC,OAAO,CAAC;YACnC,KAAI,CAAC,YAAY,GAAC,OAAO,CAAC,OAAO,CAAC;YAClC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;gBACjC,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gBACjB,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;YACzC,CAAC,CAAC;QACJ,CAAC,EACD,UAAC,MAAM;YACL,IAAI,MAAM,CAAC,MAAM,IAAI,GAAG,EAAG;aAC1B;iBAAM;gBACL,KAAI,CAAC,WAAW,GAAG,cAAc,CAAC;gBAClC,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;aAC/D;QACH,CAAC,CAAC,CAAC;QACL,EAAE;IACJ,CAAC;IACD,8BAAS,GAAT,UAAU,SAAS;QAAnB,iBAoBC;QAnBC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAC/B,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACrB,UAAC,OAA8C;YAC7C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACvB,KAAI,CAAC,YAAY,GAAE,OAAO,CAAC,OAAO,CAAC;YACnC,KAAI,CAAC,aAAa,GAAC,OAAO,CAAC,OAAO,CAAC;YACnC,KAAI,CAAC,YAAY,GAAC,OAAO,CAAC,OAAO,CAAC;QACpC,CAAC,EACD,UAAC,MAAM;YACL,IAAI,MAAM,CAAC,MAAM,IAAI,GAAG,EAAG;aAC1B;iBAAM;gBACL,KAAI,CAAC,WAAW,GAAG,cAAc,CAAC;gBAClC,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;aAC/D;QACH,CAAC,CACF,CAAC;QACF,SAAS,CAAC,QAAQ,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IACD,8BAAS,GAAT,UAAU,KAAK;QAAf,iBAWC;QAVC,IAAM,aAAa,GAAiB;YAClC,qBAAqB,EAAE,KAAK;SAC7B,CAAC;QACF,IAAM,MAAM,GAAU,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,gBAAgB,EAAE,EAAE,KAAK,SAAE,EAAE,aAAa,CAAC,CAAC;QACpF,MAAM,CAAC,YAAY,CAAC;YAClB,KAAI,CAAC,WAAW,EAAE,CAAC;YACnB,KAAI,CAAC,aAAa,EAAE,CAAC;YACrB,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACzB,CAAC,CAAC;QACF,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IACD,qCAAgB,GAAhB,UAAiB,aAAkB;QACjC,QAAQ,aAAa,CAAC,KAAK,EAAC;YAC1B,KAAK,SAAS;gBACZ,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBAC1B,MAAM;YACR,KAAK,SAAS;gBACZ,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBAC1B,MAAM;YACN,KAAK,SAAS;gBACZ,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACzB,MAAM;SACL;IAGH,CAAC;IACD,8BAAS,GAAT;QAAA,iBAuBC;QAtBC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;YAC7C,IAAM,MAAM,GAAG,EAAC,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,UAAU,EAAE,CAAC;YAC9E,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,EAAE;gBAC1B,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC;gBAC3B,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;gBACxD,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,OAAyB;oBAC3D,IAAI,OAAO,CAAC,KAAK,IAAI,SAAS,EAAE;wBAC9B,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;qBAClC;oBACD,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBACrC,CAAC,EAAE,gBAAM;oBACP,IAAI,MAAM,CAAC,MAAM,IAAI,GAAG,EAAE;wBACxB,KAAI,CAAC,WAAW,GAAG,cAAc,CAAC;wBAClC,KAAI,CAAC,YAAY,CAAC,oEAAoE,CAAC,CAAC;qBACzF;yBAAM;wBACL,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;qBAC/D;gBACH,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC,CAAC;IAEJ,CAAC;IAED,wCAAmB,GAAnB,UAAoB,KAAK;QAAzB,iBA8BC;QA7BC,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;YAC7C,IAAI,UAAU,GAAG,CAAC,KAAK,CAAC,YAAY,IAAI,YAAY,CAAC,EAAC,CAAC,KAAK,EAAC,CAAC,IAAI,CAAC;YACnE,IAAM,QAAQ,GAAG;gBACf,UAAU,EAAE,UAAU;gBACtB,aAAa,EAAE,KAAK,CAAC,aAAa;gBAClC,MAAM,EAAE,UAAU;aACnB;YACD,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YACxD,KAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,OAAY;gBACtD,IAAI,OAAO,CAAC,KAAK,IAAI,SAAS,EAAE;oBAC9B,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;iBAClC;gBACD,KAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC1C,CAAC,EAAE,gBAAM;gBACP,KAAI,CAAC,WAAW,GAAG,cAAc,CAAC;gBAClC,IAAI,MAAM,CAAC,MAAM,IAAI,GAAG,EAAE;oBACxB,KAAI,CAAC,YAAY,CAAC,oEAAoE,CAAC,CAAC;iBACzF;qBAAM;oBACL,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;iBAC/D;YAEH,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAGzB,CAAC;IACD,2BAAM,GAAN,UAAO,aAAa;QAApB,iBAoBC;QAnBC,IAAM,MAAM,GAAG,EAAC,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,aAAa,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;QACjF,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAC,EAAE;YAC1B,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC;YAC5B,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,OAAyB;gBAC3D,IAAI,OAAO,CAAC,KAAK,IAAI,SAAS,EAAE;oBAC9B,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;iBAClC;gBACD,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACrC,CAAC,EAAE,gBAAM;gBACP,KAAI,CAAC,WAAW,GAAG,cAAc,CAAC;gBAClC,IAAI,MAAM,CAAC,MAAM,IAAI,GAAG,EAAE;oBACxB,KAAI,CAAC,YAAY,CAAC,oEAAoE,CAAC,CAAC;iBACzF;qBAAM;oBACL,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;iBAC/D;YAEH,CAAC,CAAC;QAEJ,CAAC,CAAC;IACJ,CAAC;IAGD,gCAAW,GAAX;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACrC,OAAO,EAAE,gBAAgB;YACzB,mBAAmB,EAAE,IAAI;SAC1B,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IAED,iCAAY,GAAZ,UAAa,GAAG,EAAE,GAAG;QACnB,IAAI,WAAW,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAElC,IAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,EAAC;YACzB,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,WAAW,EAAE,SAAS,CAAC,CAAC;SACpD;aAAM;YACL,IAAI,KAAK,GAAG,SAAS,CAAC,iBAAiB,CAAC,CAAC;YACzC,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,WAAW,GAAG,GAAG,GAAG,KAAK,GAAG,GAAG,EAAE,SAAS,CAAC,CAAC;SACxE;IACH,CAAC;IACD,kCAAa,GAAb,UAAc,MAAM;QAClB,IAAI,MAAM,CAAC,WAAW,IAAI,UAAU,EAAC;YACnC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;SAC3B;aAAM,IAAI,MAAM,CAAC,WAAW,IAAI,UAAU,EAAE;YAC3C,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;SAC3B;IACH,CAAC;IAGD,iCAAY,GAAZ,UAAa,MAAM;QACjB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;YAC7C,IAAI,QAAQ,GAAG,MAAM,CAAC,GAAG,GAAC,cAAc,GAAC,UAAU,CAAC;YACpD,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,EAAE,cAAc,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IACL,CAAC;IACD,iCAAY,GAAZ,UAAa,MAAM;QACjB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,MAAM,UAAE,CAAC,CAAC;QAC9C;;;;;UAKE;IACJ,CAAC;IAGD,iCAAY,GAAZ,UAAa,GAAG;QAAhB,iBAeC;QAbC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,OAAO,EAAE,GAAG;YACZ,eAAe,EAAE,IAAI;YACrB,eAAe,EAAE,IAAI;YACrB,QAAQ,EAAE,QAAQ;YAClB,QAAQ,EAAE,IAAI,CAAC,WAAW;SAC3B,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,CAAC;YACjB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAC/B,KAAI,CAAC,WAAW,GAAG,YAAY,CAAC;QAClC,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IA7PU,UAAU;QAJtB,wEAAS,CAAC;YACT,QAAQ,EAAE,aAAa;WACG;SAC3B,CAAC;6EAiB+B;YACX,wEAAS;YACN,uEAAiB;YACnB,2EAAe;YACpB,gEAAY;YACR,sEAAQ;YACX,gEAAe;YACb,qFAAO;YACP,OAAc;OAxBtB,UAAU,CA+PtB;IAAD,CAAC;AAAA;SA/PY,UAAU,e","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EventsPage } from './events';\n\n@NgModule({\n  declarations: [\n    EventsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EventsPage),\n  ],\n})\nexport class EventsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Loading, LoadingController, \n  Modal, ModalController, ModalOptions, ToastController, Platform  } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { RestProvider } from '../../providers/rest/rest';\n\n\n/**\n * Generated class for the EventsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-events',\n  templateUrl: 'events.html',\n})\nexport class EventsPage {\n  showPublic = true;\n  showSector = false;\n  showSchool = false;\n  selectedSegment: any;\n  loading: Loading;\n  error = false;\n \n  publicEvents: any;\n  privateEvents: any;\n  schoolEvents: any;\n  asistLabel = \"No Confirmado\";\n  role: string = null;\n  customStyle = \"toast-nice\";\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private loadingCtrl: LoadingController,\n    private toastCtrl: ToastController,\n    private rest: RestProvider,\n    private platform: Platform,\n    private modal: ModalController,\n    private storage: Storage,\n    private scanner: BarcodeScanner) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad EventsPage');\n    this.showLoading();\n    this.manualRefresh();\n    this.loading.dismiss();\n  } \n  ionViewDidEnter() {\n    this.showLoading();\n    console.log('ionViewDidLoad EventsPage');\n    this.manualRefresh();\n    this.loading.dismiss();\n      \n  }\n  manualRefresh(){\n    //\n    this.rest.events().then(\n      (resolve: { succes, Publico, Privado, Escuela }) => {\n        this.publicEvents =resolve.Publico;\n        this.privateEvents=resolve.Privado;\n        this.schoolEvents=resolve.Escuela;\n        this.storage.get('role').then((role)=>{\n          this.role = role;\n          console.log('Events Role:', this.role);\n        })\n      },\n      (reject) => {\n        if (reject.status == '0' ) {\n        } else {\n          this.customStyle = \"toast-danger\";\n          this.presentToast(JSON.stringify(reject.error.error.message));\n        }\n      });\n    //\n  }\n  doRefresh(refresher){\n    console.log(\"start refresher\");\n    this.showLoading();\n    this.rest.events().then(\n      (resolve: { succes, Publico, Privado, Escuela }) => {\n        console.log(\"resolve\");\n        this.publicEvents =resolve.Publico;\n        this.privateEvents=resolve.Privado;\n        this.schoolEvents=resolve.Escuela;\n      },\n      (reject) => {\n        if (reject.status == '0' ) {\n        } else {\n          this.customStyle = \"toast-danger\";\n          this.presentToast(JSON.stringify(reject.error.error.message));\n        } \n      }\n    );\n    refresher.complete();\n    this.loading.dismiss();\n  }\n  openEvent(event){\n    const detailOptions: ModalOptions = {\n      enableBackdropDismiss: false\n    };\n    const detail: Modal = this.modal.create('StardetailPage', { event }, detailOptions);\n    detail.onDidDismiss(()=>{\n      this.showLoading();\n      this.manualRefresh();\n      this.loading.dismiss();\n    })\n    detail.present();\n  }\n  onSegmentChanged(segmentButton: any) {\n    switch (segmentButton.value){\n      case 'Publico':\n        this.showPublic = true;\n        this.showSector = false;\n        this.showSchool = false;\n      break;\n    case 'Privado':\n      this.showPublic = false;\n      this.showSector = true;\n      this.showSchool = false;\n    break;\n    case 'Escuela':\n      this.showPublic = false;\n      this.showSector = false;\n      this.showSchool = true;\n    break;\n    }\n   \n\n  }\n  scanQRFav(){\n    console.log(\"fav Action\");\n    this.storage.get(\"session_id\").then((session_id) => {\n      const qrData = {type: \"Asistencia\", record_id: null, session_id: session_id };\n      this.scanner.scan().then((qr)=>{\n        qrData.record_id = qr.text;\n        console.log(\"Fav Scan Payload\", JSON.stringify(qrData));\n        this.rest.transaction(qrData).then((resolve: {message, style} ) => {\n          if (resolve.style != undefined) {\n            this.customStyle = resolve.style;\n          }\n          this.presentToast(resolve.message);\n        }, reject => {\n          if (reject.status == '0' ){\n            this.customStyle = \"toast-danger\";\n            this.presentToast(\"No hay comunicacion con el servicio. Revise su conexion a internet\");\n          } else {\n            this.presentToast(JSON.stringify(reject.error.error.message));\n          }\n        })\n      })\n    })\n\n  }\n\n  updateConfirmationL(event){\n    console.log('Confirmation', JSON.stringify(event));\n    this.showLoading();\n    this.storage.get('session_id').then((session_id)=>{\n      let new_assist = (event.confirmation == 'Confirmado')? false: true;\n      const postData = { \n        session_id: session_id,\n        activity_code: event.activity_code,\n        assist: new_assist\n      }\n      console.log('Assist Payload:', JSON.stringify(postData))\n      this.rest.eventConfirmation(postData).then((resolve: any ) => {\n        if (resolve.style != undefined) {\n          this.customStyle = resolve.style;\n        }\n        this.manualRefresh();\n        this.presentToast(resolve.data.message);\n      }, reject => {\n        this.customStyle = \"toast-danger\";\n        if (reject.status == '0' ){\n          this.presentToast(\"No hay comunicacion con el servicio. Revise su conexion a internet\");\n        } else {\n          this.presentToast(JSON.stringify(reject.error.error.message));\n        }\n\n      })\n    });\n    this.loading.dismiss();\n    \n\n  }\n  scanQR(activity_code){\n    const qrData = {type: \"Asistencia\", record_id: activity_code, session_id: null };\n    this.scanner.scan().then((qr)=>{\n      qrData.session_id = qr.text; \n      this.rest.transaction(qrData).then((resolve: {message, style} ) => {\n        if (resolve.style != undefined) {\n          this.customStyle = resolve.style;\n        }\n        this.presentToast(resolve.message);\n      }, reject => {\n        this.customStyle = \"toast-danger\";\n        if (reject.status == '0' ){\n          this.presentToast(\"No hay comunicacion con el servicio. Revise su conexion a internet\");\n        } else {\n          this.presentToast(JSON.stringify(reject.error.error.message));\n        }\n\n      })\n\n    })\n  }\n\n\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...',\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n  openLocation(lat, lng){\n    let destination = lat + ',' + lng;\n\n    if(this.platform.is('ios')){\n      window.open('maps://?q=' + destination, '_system');\n    } else {\n      let label = encodeURI('Evento Agexport');\n      window.open('geo:0,0?q=' + destination + '(' + label + ')', '_system');\n    }\n  }\n  dynamicAction(action){\n    if (action.browsertype == \"External\"){\n      this.openExternal(action);\n    } else if (action.browsertype == \"Internal\") {\n      this.openInternal(action);\n    }\n  }\n\n\n  openExternal(action){\n    this.storage.get(\"session_id\").then((session_id) => {\n      let fullpath = action.url+\"?session_id=\"+session_id;\n      window.open(fullpath, '_system', 'location=yes');\n    });\n  }\n  openInternal(action){\n    this.navCtrl.push('InternalPage', { action });\n    /*const detailOptions: ModalOptions = {\n      enableBackdropDismiss: false\n    };\n    const detail: Modal = this.modal.create('InternalPage', { action }, detailOptions);\n    detail.present();\n    */\n  }\n\n\n  presentToast(msg) {\n\n    let toast = this.toastCtrl.create({\n      message: msg,\n      showCloseButton: true,\n      closeButtonText: 'Ok',\n      position: 'middle',\n      cssClass: this.customStyle\n    });\n  \n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n      this.customStyle = \"toast-nice\";\n    });\n    toast.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/events/events.ts"],"sourceRoot":""}